{% extends "concesionaria/index.html" %}

{% block contenido %}
<div class="row justify-content-center py-5">
    <div class="col-lg-8">
        <div class="card shadow-lg border-0 rounded-4">
            <div class="card-header bg-warning text-dark py-4 text-center">
                <h3 class="fw-bold mb-0"><i class="bi bi-person-bounding-box me-2"></i>Editar Perfil</h3>
            </div>
            
            <div class="card-body p-4 p-md-5">
                <form method="POST" enctype="multipart/form-data"> {% csrf_token %}
                    
                    <div class="row">
                        <div class="col-md-4 text-center border-end">
                            <label class="form-label fw-bold d-block mb-3 text-primary">Foto de Perfil</label>
                            
                            <div class="mb-3">
                                {% if user.avatar %}
                                    <img src="{{ user.avatar.url }}" class="rounded-circle shadow-sm border" width="140" height="140" style="object-fit: cover;">
                                {% else %}
                                    <div class="bg-light rounded-circle mx-auto d-flex align-items-center justify-content-center border" style="width: 140px; height: 140px;">
                                        <i class="bi bi-person text-muted display-1"></i>
                                    </div>
                                {% endif %}
                            </div>

                            <div class="mb-4">
                                <p class="small text-muted mb-2">Subir nueva imagen:</p>
                                {{ form.avatar }} {% if form.avatar.errors %}
                                    <div class="text-danger small">{{ form.avatar.errors }}</div>
                                {% endif %}
                            </div>
                        </div>

                        <div class="col-md-8 ps-md-4">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label fw-bold">Nombre</label>
                                    {{ form.first_name }}
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label fw-bold">Apellido</label>
                                    {{ form.last_name }}
                                </div>
                                <div class="col-12">
                                    <label class="form-label fw-bold">País</label>
                                    {{ form.pais }}
                                </div>
                                <div class="col-12">
                                    <label class="form-label fw-bold">Fecha de Nacimiento</label>
                                    {{ form.fecha_de_nacimiento }}
                                </div>
                                <div class="col-12">
                                    <label class="form-label fw-bold">Dirección</label>
                                    {{ form.direccion }}
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr class="my-4">
<div class="alert alert-info d-flex align-items-center rounded-4 border-0 shadow-sm mt-4">
    <i class="bi bi-info-circle-fill me-3 fs-4"></i>
    <div>
        <strong>¿Quieres cambiar tu clave?</strong> Por seguridad, esto se realiza en una sección separada.
        <a href="{% url 'password_change' %}" class="btn btn-sm btn-outline-dark ms-3 fw-bold rounded-pill px-3">
            Cambiar Contraseña
        </a>
    </div>
</div>
                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <a href="{% url 'perfil_detail' %}" class="btn btn-outline-secondary px-4 rounded-pill">Cancelar</a>
                        <button type="submit" class="btn btn-warning px-5 fw-bold rounded-pill shadow-sm">
                            <i class="bi bi-check-lg me-2"></i>Guardar Cambios
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}